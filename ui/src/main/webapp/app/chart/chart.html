<!--
  ~ Copyright 2017-2018 Crown Copyright
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<div ng-cloak layout="column" layout-margin layout-align=" stretch">

    <div ng-if="ctrl.data.results.length === 0">
        No results
    </div>

    <div ng-if="ctrl.data.results.length > 0">
        <p>Filters</p>

        <div layout="row" flex>
            <md-input-container flex="50">
                <md-select
                        ng-model="ctrl.data.types" multiple
                        ng-change="ctrl.updateFilteredResults()"
                        md-selected-text="ctrl.selectedTypesText()">
                    <md-option ng-value="type"
                               ng-repeat="type in ctrl.data.allTypes">
                        {{type}}
                    </md-option>
                </md-select>
            </md-input-container>

            <md-input-container flex="50">
                <md-select
                        ng-model="ctrl.data.groups" multiple
                        ng-change="ctrl.updateFilteredResults()"
                        md-selected-text="ctrl.selectedGroupsText()">
                    <md-option ng-value="group"
                               ng-repeat="group in ctrl.data.allGroups">
                        {{group}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>


        <p>Results</p>

        <md-input-container>
            <label>x-axis</label>
            <md-select ng-model="ctrl.xaxis"
                       ng-change="ctrl.onPropertyChange()">
                <md-option ng-value="col"
                           ng-repeat="col in ctrl.allXaxis">
                    {{col}}
                    <span ng-if="'source' === col">/ vertex</span>
                </md-option>
            </md-select>
        </md-input-container>

        <md-input-container>
            <label>y-axis</label>
            <md-select ng-model="ctrl.yaxis"
                       ng-change="ctrl.onPropertyChange()">
                <md-option value="FREQUENCY">
                    Frequency
                </md-option>
                <md-option ng-value="col"
                           ng-repeat="col in ctrl.allYaxis">
                    {{col}}
                    <span ng-if="'source' === col">/ vertex</span>
                </md-option>
            </md-select>
        </md-input-container>

        <canvas class="chart chart-line"
                chart-data="ctrl.chartData"
                chart-labels="ctrl.chartLabels">
        </canvas>
    </div>
</div>
